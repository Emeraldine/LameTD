const canvas = document.getElementById("bad");
const ctx = canvas.getContext("2d");

canvas.width = 900;
canvas.height = 500;
const aliveEnemies = [];



const source = "data:image/png;base64,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";

var background = new Image();
background.src = source;

background.onload = function () {
    ctx.drawImage(background, 0, 0);
}



///////////
// towers
///////////
var selected = false;
var selection = undefined;
var canPlace = false;

const towerMap = [
    {
        "name": "tower1",
        "image": "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAACi0lEQVRYR+VXO28TQRAe+84cKSCOoEAQxbJkWf45dIiGDtrUoaEDWlroaFA6fo5lWbKMBKLg4ZAinO3zoW98s1rv7cuJI5CYxvbd7sw33zzdoL8sjYD9koh8Z/AeEjrjfO+9OBgMaDgcugyU/X6fVqsVjcdj75nRaOQE+c8CKOH9crlkfh0ehhhQ74uioMlkYmXBxYANwEa6gH4IQqAZqJ0x3tfsRQN4d3DEyl+2E0qSpJa7AAF5Plt/Pv35iSRHtmVgw3sogwIo/lYs6e2dTAGoQkO9Xo+N4tyT2ZwOKakBdYGwMRAFAMbBCkCd/PrCIGDk2fec7ibp9QJAQr26fZ+9/p00KG8Qvf7xmbrdLgOA6EwJO7ZEtDKACxI/uWwqBgMvDh5sGMdZFwAJl9m0nEkYAqCVJ3uOxJQQmAxsm4S4r2rYxQCeLxYLajabKil3CkAPgyhGvN+3b1jLUK8CfJdzRo+I7gMbLOwIgDXc3lmgNxIkVwwDj87mlJVWBq4GwFRca4VVTjw+X8+P0/11qHwJiHNRDCDZRPGHWym1Wi0ZUAoHKgF93wSAu9Pp1GnrUgCgUNsV1PdOp0MPz3LaayYkQK8CQCVinufs2cWqoDezr2wQo1qfBWma8vJy3L6nAECBz/tQCITeEp5tAwAXP+5nQeNbAQC1kBgGdg2AQyF0WDYlNY4lDFqFhJZebxWYlVYb0+Y+gAsaiKDx2BCoXNC911usDKP/B4Dsf9WCweMYgs53XSHg8Yx+oEtV44Qy1SXLMvL9GdHPRiWK7AcAIEZtswDPAGbXANh7SOUVr2KQm4WqTv6N5RRinPc6GcMAAxDjaLUQ9HuMXREBo4OICUPoX62L6cs8t9r6A7O1TT8L/JDDAAAAAElFTkSuQmCC",
        "speed": 125,
        "radius": 75
    }, {
        "name": "tower2",
        "image": "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAChElEQVRYR82XvWobQRSFjyQrDhjbmBQWNlgoCEVpQwp1rtKlyjukyCO4sjv7DVz4HVy5ywuoCGkjCxGhQIIM/kEJgSiytOGM9orZ1fxp5ZAMGKzd2TnfPXNmZzaHf9xyHv0IgKsP77P5+ljvOx+sVCrodrs2gaharSr1Tqdj7VMul9Hr9ayQ/y1AxOoLhYKrQp8DEasvFotOl2wOmAAScRH7eXE8HstUJfo8KIAuaAouIfTG7AS4aExvonrXKonDhzQcYSaTycx+GcMUVtMUBAFwsLOtPVyP73Hw/dschAn8wQA40PHGzkxjsJLDye3XhOVLAfDhWq2mbLQ1Qhxu7WKYg1c8n8+j3W7LUAnXravAB6C9gLyVawBzeksBjEYjVZWsdZtbmQBCpsGzj6jbLvu9m0i9Xlc5sGXBtgwFjOL8a7Va2fYCPmWDoPjPj8DVDfD0FeZykBLPBkCBtRduCI6sv3LFdqn88/spoG3Ldu6GBBj8AHb2zRCmEOqVU3z7ybSIpQD4tA1CD2Ja/PEjYHM9OwDHjsSFNAR/SzgpLNYzcKw8RNy3CqS4GcSv39P5ZDBNAIuKZwIYDoHnr6dsAhIvM3y6AFZXw6sPBVBTQVvZCDD4UELjqJ8AaB6VsPmyrwDYXMnXc+M7Fet9FUQIQKj4Ig4oF2ixVK+Tyf/iQjxFQcUFdYoFIgqw0f7muxJwFd/ZBhqnfej3Pd8KM/6FAPSqm29KwGV85RnQOO+nTQkaO6gT7ee5T3Y2pp/J55GM7e3dFxVIXpNzhONjJQGaGYCjyPLTl+PfAEhUTwFp8gbUt2sevRaBCHEgElEOLkdwERcYgaD1en9fGH1ftabVlvWaUesPCMiEMHjI4woAAAAASUVORK5CYIIA",
        "speed": 100,
        "radius": 100
    }, {
        "name": "tower3",
        "image": "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAACvUlEQVRYR+2WTYsaQRCGazQQBRUWVMgujBiNeDCHnBPID8mfCLntKcfNKQRyzDk/JIecc4gHMYIozAZ0DPhBNPGjw9tuDW3PdM+4LoRA+jIz/VH19FtV3ePQX25OjH9BRLY5GEeLm2Mcty5sNpvU6XRMDgTG0Wxz6vU69Xo9I+TJAJvNxuZAQloAjdKJRqNBu91O7tCwg2COaRzOAWixcRTAQbqogIoD4xxTGEwhCCmAWB7T4DCBipEKiKTObnZFUfNTqVQQQgaPUiFKgUQAMPbhzCV/u6HL2XUkhK5YYgA1eTi+6i5h6KpwHtif3nPozQ/vAAJzdGUSA8AyQ2DR9Sei8+cUcvD67IJ+ORTp/OLyCXlXX4I1HC790DImoV5ChUKByuXygaqmHBiNRjSbzULAUSdmIgD2CsMqBL7R9D4d9FbngBoGddsMged0OiXf96lWq0kIHRDrttst9ft9NhHacOxRzCeZDoFvz/NotVpJAF0Jnq8ARPq6FQCMTiaTA4Ao2TUFjgfQj1s2COftdpuy2azc6HK5pFarFUrS/wBQYL1e02AwwOvdhECVVYj9D5HjOFStVimdTofuq1MAYOzgVtQzOw4gzrlRFmUbRwFgnarCXQAEKjBUt9uVr/P5nHK5HC0WC/mdz+fls1KpBPy22BtPplAQ9x3890vVt0+p/+qzBFAbAHhM6Y/767b+Tqv2xcP3z0isBf0e/5S3HABwCqJlMhmpAADQeE7M7/o+gQ071rsFjMMw2m65oe/vvtJ4PJbfpVJJOtfHk9j/JwAEyg21XnzxiO67OasCrA6viVMhiQKCM54h/I/fAvk5VgjDg5ePZWjgHNVxUxlWH3EAAnFGkqGh7HD/4/Lhi4gBuK9YLAaliSQFmE2FRACc6SoA+lzXlf6Hw6F8AooBuEJOAQhqP2GlxE2L3OwfF64mP1MT9SIAAAAASUVORK5CYIIA",
        "speed": 75,
        "radius": 125
    }, {
        "name": "tower4",
        "image": "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAC80lEQVRYR8VXz2sTQRR+2WyrOagEby0IgRByrJZCQWpvnuxFwYt/SU8e6//g2YugB/HkTUEolGp6CyGQU3vSlriQpJ3NrnzTfePsZGcm2RScS7Mz8973ve/92G2F/vOqePBTInLdwTmW74713GnYbrep2+3aAFKcY7nuNBoNGgwGVpJLEWi1WpQkCfX7fSvJsgRkdHEcywgtAKmHQArwarXq8mHNXRGBXLkwOG9mJHN3liLQbDaVMzjHcxAEag/SuxZsyhLIRe8DwblO1nYf5Hu93kytFBXhDAEYmxEjwrf1B/RrGtP+nzMviYUI6PllQzMlB3fXVLDDsEJvzk9nJNdtFiIAzyCBBdnOvhKt7ealhgKv6+t0WaFC8PX9h3R68FPVTib/XCnAJdVi3IZ6QZmVbzvjfVv0rhGactUj99PpVPWzXmRCCPkIAO53PsdZrVZT123T0jYJecZLB2bPO/svOwzDkEe0fn0GzzmKd3d2KBaCvh8eFpLg4WO2IUsO+yiK6EenY1XbSeDx9jZdCSFTACfmeK6//EbxZEjRpz3Vhhy5aWt7Y85NACEUkcC+WWwAH08mUvokTalzclJOAVuuuSagDBYKUKt0m1lhsE4F7r86Us4SMVa/L94/yU0+Br/z7EMhePT5RTkFkGN9JfGEgvA2eQkEq8osCG/R8OPTcgTMcEDIJMHR33v+5Trn8aUsyoK1eArQRry4HU0SODfBtzY3pZnIPmjKFiF8pCAxGo2kw9WVFTkTdBLXUU9U5I82NlT144cL3JoXQz41FRGZSUKXHeDoiKPjY92F88vb91kuVeBiRPHpJFh6FJkOzt3z+92WN8i5CejFp5MAgg7O6dGK8WYU0PPMBHhM85sQ0t80gRRyxuOLfwMpazOe9Xygg/PePCr4UpAjkFxFhKlmgmMk88xnBWRxZvdd/7p5R7EeveFU5h4re90q+fUW8JHwEpCgYix7nQkwQDbjJTDPA27L7LL8U/pdYMyDZR8Lg/0L7wsuP1iK/T8AAAAASUVORK5CYIIA",
        "speed": 50,
        "radius": 150
    }, {
        "name": "tower5",
        "image": "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAACgUlEQVRYR9WXsU4bQRCG5zCmRHIXgZRXwAkgIRHLDxBFoqKnoiJtQkUJtClJkRQ8QJQ3SJRISBGJUV4hICwhLDvo5OPObDQjz2m8t7s3Z9xku7vd2/+b2X9n9yLQNeMYFlnvNGMK09iT2ANo0narRe+zNIX7NIUf5+f4WAB43mzCgzEwF0VQq9V4nGtsrhMCMOurq7BQr5MotrFwaEICbq6sQH1+PhfxAFN/EGBzY8MWL8sYixrMBmZBgDu/9U1I0XMLRRCwkArCC+CIXmdXMUqTBTWAzIiGBLM2LYCR0YfE2JQauNFoBD87nYLvXBlQAaD4+8ZTuBllsD+4gjKIRwGgmG3Kw8UlSs6wFkESARzdXhZSLr+pBICFJ47jfAtdfQFYakMB4qCx7BVf3n8Gl4e/8m+qAKCwsSFcKWYPSLPJravZyt5dIAF8RkyzjLpk1XON9UUfLKkugDLX+/pnAoCTN7a/Qjbsw9/Prwqux/6Pe79hcNeH1x9eTBhyJgDyMHKteah/ZgD2mtspx34+iqUXpgIoq4Yo/unNNelsHT8JFiIE61xcOD2nOgtsZ7N4t/cn79o9WfNCPBpAXERIECOX4kyBELJxHZgGgIoRT8apxmeXsK9OWECVLiQ8p/FFqzmSccwYwnuTKrtiGdzb3JIk0epOeCN09SsDmFgKLYwm9UyoASAI3Jbfz87yyBBGZkSKYqFyXT5c6dMCEAS7mssuAyTpkMov9oeKzn8N4I2eo+rFXXh7+rJyFjRLUCqOSxCnfWKpClEJANcX29hg8G7nGz3j+nPjk1LrhTKAiT8kFsHJ8Sd0fMDQvyA3vh3xyek7hDTb0PW7XbkQiQ+cwf4D1jTXMHwr42oAAAAASUVORK5CYIIA",
        "speed": 25,
        "radius": 175
    }, {
        "name": "tower6",
        "image": "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAADr0lEQVRYR8VXv09TURQ+pSVo0xbfwgCJpEmD3SDEgQQJo5Orm2GSTRMNDC6YsGgC0R0G5S8gcXOsxEkhEBckJA0mMtSG2pZUKpSa7/DOy3m39z0edPAst+/dc873nR/39rwY/WeJdYHfNmyv5euqRh5oPp/34e/u7urnyH4vUzSjJBPYzKBBRLYDcWQDQFqJgXO5XEeF9vf3aWRkhHp6enx75+fntLe3F2jjKpsYMbxor62t0czMDHQ8QjZwKIAARJMQ8CDSys7zv7CwQIuLiwzIBEqlEs3PzwuJdjabpXg87kXZarWoWCzSysoK9fX1MWEhCVLw0Ww2aXZ2loJs3QDbS0tLVK/XOwkADSSggFUcafBqtcqkBgYGJGsMjgAg/f39PhJiKz6xQjQBPHtZ0IUFieHhYTo4OODITfBV5zaVW2f0onbIpEWEhNjqPQ2OjHg10VFIFiQjGlzevcoMMt5JPEbNGNHro5+EuqbTaV8mBFz7lOitBKB4WCAanCafQ/M4QO+lM2QFt+lm30xS8flnzpSNgK8McK6j6TiL7gu3aSPrmuD62DEBM9VBwN2819GHEpDozAYymxTPV9EJI+BlAWfZefiJzk6qVP/woCPFQu5j7eKmvp+56GWTCPTeP/lGteMqPX13j/3g8tG3rnlHe2UIqi/er/84YsDkLYcavytULv/i58fjd6wksCc9pS47trESwAbOPNIlx0qOn4AfN/5QKnmTnYDAjWSKfz/KD0UpiYdr+5fivNrOfhA49IXASeM4NBNm0FYC01NTVNjY8JGQ5gEJiV5SHwYuduIzMoFGo0FfNjd96TRJyIlA1LYeEP3JiQlK9PZyUFEI8GkA4zASUHpb+MrAz6bv+k4BgCHoeID/PT3lYCw919GEEpRHAC9cY+5kCIhBlpeXeZ2bm+M1mUx6wPgh4PhH3NrevhoBMYYVHEBcJ0IycIUtBJGLfdcE4ABTEASjl1xCcg/gDpApCXPh+NiYN9BcJwPcB3AikYtzGb9AAOA4EXL0TB1tb6u/tSYqr0wAketJGNFpcNEPIjE2OkrbOzuBWGFjeVuM9QAKAnIX6CYQApgTE4kEb0G3GwJcBnMEl7lfkxBwGGgCalq+9LsgrLPb4hTgMqhiEl7d+s5XMO5/6MgAqvWDai+Al30ZcRa0Qwya+CjBiI6LKJVO890PYogYAyx+Y3R3sxWKEYkAHEIACgKVSoWfa7Uar5lMhlfHcZgAdCD43U0GOr4Lw+oUYc8a7D8F37I8NsfsDwAAAABJRU5ErkJgggAA",
        "speed": 5,
        "radius": 200
    },
]

////////
// math
////////
function between(x, min, max) {
    return x >= min && x <= max;
}

Math.rand = function (max) {
    return Math.floor(Math.random() * (max + 1));
}
Math.move = function (obj, target, speed) {
    var distx = target.x - obj.x;
    var disty = target.y - obj.y;
    var angle = Math.atan2(disty, distx);

    obj.x += speed * Math.cos(angle);
    obj.y += speed * Math.sin(angle);

    return (distx < 0 ? -distx : distx) + (disty < 0 ? -disty : disty) < 2;
};
Math.inRadius = function (x1, y1, x2, y2, rad) {
    return (x2 - x1) * (x2 - x1) + (y2 - y1) * (y2 - y1) < rad * rad;
};


const placedTowers = [];

class Tower {
    constructor(type, x, y) {
        this.type = type;
        this.x = x;
        this.y = y;
    }
    getType()
    {
        return this.type;
    }
    build(first = null) {
        var img = new Image();
        img.src = towerMap.find(tower => tower.name == this.type).image;
        let tmpX = this.x;
        let tmpY = this.y;
        img.onload = function () {
            ctx.drawImage(img, tmpX, tmpY);
        }
        if(first){
            placedTowers.push(this);
            mapPath.push([tmpX, tmpY, 42, 42]);
        }
    }
    getX() {
        return this.x;
    }
    getY() {
        return this.y;
    }
    isShoot() {
        if (this.coolDown == 0) {
            return true;
        }
        else return false;
    }
    setCoolDown(val) {
        this.coolDown = val;
    }
    getCooldown() {
        return this.coolDown;
    }
    spawn()
    {
        let img = new Image();
        img.src = enemyMap.find(enemy => enemy.name == this.type).image;
        let tmpX = this.x;
        let tmpY = this.y;
        img.onload = function () {
            ctx.drawImage(img, tmpX, tmpY);
        }
    }
}


canvas.addEventListener('mousedown', e => {
    if (selected && canPlace) {
        var tow = new Tower(selection, e.x - 21, e.y - 21);
        tow.build(true);
        selected = false;
        selection = undefined;
        enableButtons();
    }
});

function disableButtons() {
    for (var i = 1; i <= 6; i++) {
        document.getElementById(`button${i}`).disabled = true;
        document.getElementById(`button${i}`).style.color = "rgba(255, 99, 99, 0.6)";
    }
}
function enableButtons() {
    for (var i = 1; i <= 6; i++) {
        document.getElementById(`button${i}`).disabled = false;
        document.getElementById(`button${i}`).style.color = "#CCC";
    }
}

function doTower1() {
    if (buy(50)) {
        selected = true;
        selection = "tower1";
        disableButtons();
    }
}
function doTower2() {
    if (buy(125)) {
        selected = true;
        selection = "tower2";
        disableButtons();
    }
}
function doTower3() {
    if (buy(275)) {
        selected = true;
        selection = "tower3";
        disableButtons();
    }
}
function doTower4() {
    if (buy(575)) {
        selected = true;
        selection = "tower4";
        disableButtons();
    }
}
function doTower5() {
    if (buy(1175)) {
        selected = true;
        selection = "tower5";
        disableButtons();
    }
}
function doTower6() {
    if (buy(2375)) {
        selected = true;
        selection = "tower6";
        disableButtons();
    }
}

///////////
// radius of placing a tower
///////////
const mapPath = [
    [132, 0, 66, 391],
    [199, 326, 590, 65],
    [723, 68, 66, 257],
    [268, 68, 454, 65],
    [268, 134, 65, 400]
];

for (var i = 0; i < mapPath.length; i++) {
    ctx.fillRect(...mapPath[i]);
}
function isPointInRects(x, y) {
    for (var i = 0; i < mapPath.length; i++) {
        var xStart = mapPath[i][0],
            yStart = mapPath[i][1],
            xEnd = xStart + mapPath[i][2],
            yEnd = yStart + mapPath[i][3];
        if ((x >= xStart && x <= xEnd) && (y >= yStart && y <= yEnd)) {
            return true;
        }
    }
    return false;
};

var mouseX = NaN;
var mouseY = NaN;

canvas.addEventListener('mousemove', setMousePosition, false);
canvas.addEventListener('mouseleave', e => {
    mouseX = NaN;
    mouseY = NaN;
})

function setMousePosition(e) {
    mouseX = e.x;
    mouseY = e.y;
    if (selected && isPointInRects(e.x, e.y)) {
        canPlace = false;
    } else {
        canPlace = true;
    }
}

function update() {
    if (selected) {
        let tow = towerMap.find(tower => tower.name == selection);
        ctx.beginPath();
        ctx.arc(mouseX, mouseY, tow.radius, 0, 2 * Math.PI, true);
        canPlace ? ctx.fillStyle = "rgba(138, 138, 138, 0.5)" : ctx.fillStyle = "rgba(255, 0, 0, 0.5)";
        ctx.fill();
        tmpTower = new Image();
        tmpTower.src = tow.image;
        tmpTower.onload = function () {
        ctx.drawImage(tmpTower, (mouseX - 21), (mouseY - 21));
        }
    }
    requestAnimationFrame(update);
}
update();


function rebuild() {
    
    setBg(); 
    for (let i = 0; i < placedTowers.length; i++) {
        placedTowers[i].build();
        }
        for(var j = 0; j < aliveEnemies.length; j++)
        {
            aliveEnemies[j].spawn();
        }
        
        if(aliveEnemies.length == 0)
        {
            enableWave();
        }
        requestAnimationFrame(checkAttack);
    
}
rebuild();

function checkAttack() {
    rebuild();
    for (var i = 0; i < aliveEnemies.length; i++) {
        for (var j = 0; j < placedTowers.length; j++) {
            if (placedTowers[j].getCooldown() == null) {
                placedTowers[j].setCoolDown(towerMap.find(tower => tower.name == placedTowers[i].getType()).speed);
                console.log("set cooldwon");
                continue;
            }
            if (placedTowers[j].getCooldown() <= 0) {
                placedTowers[j].setCoolDown(towerMap.find(tower => tower.name == placedTowers[i].type).speed);
                if (Math.inRadius(aliveEnemies[i].getX(), aliveEnemies[i].getY(), placedTowers[j].getX(), placedTowers[j].getY(),
                    towerMap.find(tower => tower.name == placedTowers[i].type).radius)) {
                    aliveEnemies[i].damaged();
                    //aliveEnemies.splice(i, 1);
                    i--;
                    console.log("shot a thing");
                }
                placedTowers[j].setCoolDown(towerMap.find(tower => tower.name == placedTowers[i].getType()).speed);
            }
            if (placedTowers[j].getCooldown() > 0) {
                placedTowers[j].setCoolDown(placedTowers[j].getCooldown() - 1);
            }
        }
    }
    
}

function setBg() {
    
    let bgIMG = new Image();
    bgIMG.src = source;
    bgIMG.onload = function(){
    ctx.drawImage(bgIMG, 0, 0, canvas.width, canvas.height);
    }
}

function getMoney() {
    return document.getElementById("cash").innerHTML;
}

function buy(value) {
    if (getMoney() >= value) {
        let a = document.getElementById("cash").innerHTML;
        document.getElementById("cash").innerHTML = Number(a) - value;
        return true;
    } else {
        alert("Not enough funds to purchase!")
        return false;
    }
}

function save() {
    return canvas.toDataURL();
}

function loseHealth() {
    gameHealth = Number(document.getElementById("health").innerHTML);
    gameHealth--;
    document.getElementById("health").innerHTML = gameHealth;
    if(gameHealth <= 0)
    {
        alert("hahahahah you suck you lost ok bye now im gonna go get sleep");
    }
    for(var i = 0; i < aliveEnemies.length;i++)
    {
        
        if(!aliveEnemies[i].doesExist())
        {
            aliveEnemies.splice(i, 1);  
            i--;
            if(aliveEnemies.length == 0)
            {
            enableWave();
            }  
        }
    }
}
function getHealth() {
    return Number(document.getElementById("health").innerHTML);
}

//////////
// enemies / waves
//////////
const map = [];
function startWave() {
    let a = document.getElementById("wave").innerHTML;
    document.getElementById("wave").innerHTML = Number(a) + 1;
    createWave(document.getElementById("wave").innerHTML);
    /*var e = makeT1Enemy(145, 0);
    e.doThing(enemyMap);
    for(var i = 0; i <= a; i++)
    {
    setTimeout(function () {
        e = new makeT2Enemy(145, 0);
        e.doThing(enemyMap);
    }, 100);
    }*/
    disableWave();
}
//oh god please let all this work
canvas.addEventListener("mousemove", e => {
    placedTowers.forEach(function (tower) {
        let radois = towerMap.find(t => t.name == tower.type).radius;
        var thing = Math.inRadius(e, tower, radois);
        if (thing.length > 0) {
            tower.shoot(e);
        }
    })
})

function addMoney(money) {
    let a = document.getElementById('cash').innerHTML;
    document.getElementById('cash').innerHTML = Number(a) + money;
}



function enableWave() {
    enableButtons();
    document.getElementById("thing").disabled = false;
}
function disableWave() {
    disableButtons();
    document.getElementById("thing").disabled = true;
}

const enemyMap = [
    {
        "name": "enemy1",
        "image": "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAACCUlEQVRYR8WXLW/DQAyGXVIpfIMtSWFQyEBVOjK0P1JUOjQ6tD8yNDI6FYwUBTakgSuvVJLJXnz1Xa4X30XTSio1sd/Hr30fncC4T9uFT1LTJAcCQLtcLkl3u93iV1KupKCu2n8FIPHT6UQsWZYlu5DqwJ8A4EBpgcYCGC0pqAUw4ufzmVownU5j29ADoKTKaR4LYGmxA1EAZVkCV8/rH13Y7Xaa5dgDMBUpp7kdAdDTQgdiALziES6EAdDWASsJYP+whvnbi7X7Hh43sHh/DbXBwMuhtRxQA9ytYf7pAKw2sPhKBHB7GnAhtQW9ONYgB5QAQfGBOYgD4M3FWVZX+8/iV+YguGq8DngA2qIoSAdF4AjeGYAbMMNZVRXvCaMBSNgArDY9ceOAeNYB0KPQvnHVgdQbjjYuOIScRFbBDkgBagdcbJfPhmIHAUQPMa+ZATlwUtDdmIbiowHyPKcjVwOAN6W6ruXB1CvAAnCTO/Ss2fJ7bL3bb3TBI27iZRv5PRpCCRBKMBbAp2MBBMRpDjDB9/0T4Hr3fo4Atx/Prv3yVVOs1wE1AKZ0IY6/OkkAs9mMjmFncHxFXlyQEDpxa5bw5G2ahm7BbSwAr4bDqtsHuqN5wMEwANIor+XW0HJWpbiBwKItB2IA2DHZI7ZUW4QEoAlXBloVSICIAkwO1NT+E/IOpPNjUq4fuPkCKt84HNcAAAAASUVORK5CYIIA",
        "health": 1,
        "speed": 15,
    }, {
        "name": "enemy2",
        "image": "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAACP0lEQVRYR8WXr3ICQQzGF8MMD1BRAQYkCstzVNXWFlNsVS011NZW9TmwKCQYEBV9AGYw1/nSy052L7uXW6bTM8DeJvkl+fYPPXfdU9XmvVI3xYbOuWo+n1PczWaDjyJfRUZ1tv8CwCV3yP58PhPLYDDgKnAnzIlZJ1JgLjm+I/jlcqGA/X6fIPipW2JqiwRICaqazWbeOQfFwPL4ROOr0at/Dxh+ttutBhHEsQDACRlNp9NA7PfHJf3+GK2C8d1ul2uFCmAVFBmjIrIS3IY641zpG3G4AlYAqkYLQE5XKgANKopOOSoFUOMgiH+BskJECfEks+eGW2151WC1NACifsZVoOwX+8dA+bwi1pO3FHxQtasB7vaLhvKxIj4n6zKADqJS+9/SgqxmqAVGgGzwDIQdQO5siqCS/efgsFd04AE0/0EF4q1VQPhdEHO+XE/VwK2rvDh5N5TVbQVIba1yn8WceOvl97l3mCP9c3JJDQSb+x/8MAGIQ6VxEKVOQ2Zts20FqB34syI+CbmfHFAeyRhrs+8MMB6Pg0tHDgDnyuFwkKdiFScQAMTOI3pOsuJ5cXBZBSW4t5cQPI9EKAFyDq4F0OIEAJngdBLCwcP3s8N61x7sD+83L3H55VSfrFoBKwA8xhAIjqcIYDgc0j0gEo6WpK+ChDAGD7SEu8fpdPq9D3QF4Ct4vHO2VDAPABrj36tAtOzVGNxDIOmgAl0AuGKyR1xSaxISgBRuNAwykAAdEvA+ENP610wVZDRY5OsHfJQQKnovK+UAAAAASUVORK5CYIIA",
        "health": 2,
        "speed": 13,
    }, {
        "name": "enemy3",
        "image": "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAACXElEQVRYR82XPWsCQRCGVwLCVUIgpTYKNla2/icr21RprfxPtlY2AW3OMhCwOhCCYcZ9N7N7+zGnFrlG3duZ95mv9a5nHruu1rx3r5t7DVl4sViw7na7hX5nf10NPOGmaVi4qqq7QboAXOfzOYtB+HK5sHC/33cgdG+329FvlW/VJmMMi+OCcFh3gNC6FkID4MRTwikQDYQaQCsOGMrGUwGWh4MxU2PWzcgFvKpr/r4eibWqNubTmM1k0hmAOjzMCKefol9VtSdOwjEAXrd7M1lwWhC80kyLeebIIB47ZCCOezILcr+AcMtCq0cALH4+n81gMOBN4ZiFAKG4BkKeF9CigD2AWKRYI1FEWQKQe1M+KdgWQKqmrt62CXMAVH9qwlhJpH8PgGq9fDmwIV9Bt8vGks0XRucyFGtYCwb/m5/blHAJNAClPkg1oSvhswBS6S81IkqTzABmnQ8WcdjIyEviKgjrH+PpSqACkGlMtXekf7wy5AByYxg6cQ2LG9Pbl1T2Qt/RDGgAUk2lFYZ9EQCnIQzw1IORjGVAQuTsyUcWgI7K0+nkJWQ8HrtHL6+jRQkAQOLH49GzHw6H7qhvAUjndHO/39NH65+R9r2/fv0dWGHNpsZ8fL9BvGU/m82cBSB5CiSAoE8DkBucmkET5gBiOh5ARpxkHCiXQEKICdD6iGZAaxyba6xpfXgA1CDUlbZxUs+JXqlSI1sAcJmkg48anUvwLwDs2D0UvbIMnAUK2stACQBZkgdSrAxUAqQ383bkATCR4lWKjTRXIRi4YE3Ni4nUxOt4iUPt9xdtgNAcJH6FygAAAABJRU5ErkJgggAA",
        "health": 3,
        "speed": 11,
    }, {
        "name": "enemy4",
        "image": "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAACTElEQVRYR82XoU9DMRDGO7NkiqBAMAQLalOz+3tQWIJCoggWxd8zOzUUGYKHALWgXjLzyF32Xa7Xvq7tDDPL+l57v/vuu7YbuPpPZ6YOapaqmuSc6xaLhRdvuVzS7+L1iicgeNu2HsBoNHI1EKUAnDkF3+12HsBwOHQ1EP8KgEyVAgqy/3mYsgpnj2/8XaCCxNIBUwDdfD7nIJAewVEHDUFjq9UqZcoAgLOLmIhbzQansT4AKKEgLIgXCwrEAIKske337ZUbnI48E3bb1p2/fATGjKgRAEhtIy6OKkAAsQ8AyAs9CgSxSIEUAOL0qmFBTHBr6igArcEByGC0QI+B5B2qP0wHAIzlzNfviAcyAAT08+YiqDeV5fL1K+X+aJJeG85mM+nnQyrEPJCTPc1br9fSGSUAkkHUgfvBHghv7kEA9LJRgRdp7q+D+msfjJ/ebRkC8BqADuUhs8V6HnsDzKmCHA3ACQKAAtkNR29QeLYH4EcwON7LUiBV52OfZQPoLKCADm5PQ/0sNTcLQL9EG5UFSB1GttXs/CqAyWTCNx7teJ2x3hnpxrTZbKTXiwFM9nIeAMJmjxcIIhJc5kPFpAKpBY4FwPwYANc4EZzPAVrg924a3AUkxW3rTp7frPy6UrwGlRIQchiVAHBxIxcSGq8B6MbjMR/DxjixdhcVNATtjBnBPS/R0d80Dd+CiwHQDbgZYfc7UMI0ANFk/rWSOmqJMoMLBKnuKVACgJJpAEiam4QGYIdnTvQy0AAFCcgaFLP0r5nXUsalVWv9AV/n+CrnuSntAAAAAElFTkSuQmCC",
        "health": 4,
        "speed": 9,
    }, {
        "name": "enemy5",
        "image": "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAACEElEQVRYR62Xra4CMRCFiyHhIcBgWYPFYXleLA6LYS0GHoIEszfTMM3pMD8t3CqynZ7zzXS2W2apf0zBklmPZGtwMd3tdq7++XzG+VA/CsjGaPp8Pl2AxWJR5gHG9LEmKmM0fb1eLsB8Pi/zDOOBSIBsvN1uEy1mY2l6vV7T/X5Ph8Mhmx2Px7RardIwDBUcw7DW5XLh+eKLABMZ42BjMqTBBmTI5hyPz2Q8VoXi3yDZ+wMgyra1w72qaAA5+/8yx6pYW8MQXIEPALnPLErP5V57c1olaEsQoNmcjCwwq+RWkzIEVUAtv7XXWgNqjRj1igsguzgSi+Y1PROAg1nU2m/eDnw9NRBL72eAVtAuAG4kzARPPHzeAuDpqRXoAcBYC7IbAF8Z+m0JY9fTb3ksY6UsUPctoEWRcNT5EkLqfX0O9Bh7sU0A4zgWjc1m86HnnRfR2hDgLVC+FRIgegui9d0A6/U6X1Lww4MlwQOLLjK3242mzQQqACku6Nln4jiZPZ6ainlZj1XkuPwxQgBP4FcAzacCcMwpiwx6Op3y/U8bdG7s93tZfgwtyaoVaAUgRQlB5jS+Algul4maQjSOlmSpAkI0mle9RNe/x+ORu3TqBeC3QZ6YQQV9AKIRt2TrIKualoMazQsEJV1VoAeAK4aEXNLWJBAgd3jjwioDBOhIoGiQZ/Tn1PueyL/pX2n9AST4BCqvPM1TAAAAAElFTkSuQmCC",
        "health": 5,
        "speed": 7
    }, {
        "name": "enemy6",
        "image": "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAACR0lEQVRYR62XoU4DQRCGtwlpUgcCEkIaRG1VbV8AhSUoXgCFAoPAgELxAiiCRfECtVW1FaQhJCDANWlIjvybm8vs3Ozs7R0rb2fm/3Zmbm6v57qtonTvtQ3T1tELT6dTrzubzUg/O162g3OuIOH1eu2FB4MBB8mKmWVM4iS82Wy8cL/fr0DKbDSO29iQi5OwrDtAkI0ciKYAxWQy8XoxcYKhbMznczxKxk8a4OQQ5+m2MsDtmkCkAAJxqvf96bs7f9wNKvBw9uUung6CDCEbKQgLQE07gl4evbmbl/0A4Pr4w929HtYAYGRBJAFkugHQpAS8JzoDIL1IuSXOBQHIff4VQKs/ifM+6AoQNB/qSzVH4M/vX7UH9na2qubkPlYzxnqg1v10Sh5YDqLYXi5AVLztF49eX60XtAw0BkA5sORM0EBjWZAA2eIk1hbCBLBOSHsWgPTXssABgtNbAnJPg4j5SwgVICXQZT8GUIzH46p38DrhneaL3n1tj+wsGzk7FouF/1xTBgIA7HAhOF89b/vLBp5jaYB4joGFG9PtyU9low2uJABBUFCeDQkBActOfjlhGwUAPV0yU4OHQDQBzZfHVgFgsFwuHe+HFETOPkRHo5E/oAkQCwpnrFiG6LaMQ1gxVAAELx3NS0oMQognY5BW9RYkAOgXzKfQWuL06reGa1UAZdDaaMbz4XAYaNLVW4LIq9pqtSITNW4wBxSAQgpzQQlh/S+UIMHUJT2egRqlBZDT/QoA3FHWahLG4lW1zxFUbKNN+Qdd+ZUw4fICBwAAAABJRU5ErkJgggAA",
        "health": 6,
        "speed": 5
    }
]

class Enemy {
    constructor(type, x, y, reward) {
        this.type = type;
        this.x = 145;
        this.y = y;
        this.reward = reward
        this.health = enemyMap.find(enemy => enemy.name == this.type).health;
        this.exists = true;
    }
    spawn(first = null) {
        if (!this.exists) {
            return;
        }
        let img = new Image();
        img.src = enemyMap.find(enemy => enemy.name == this.type).image;
        let tmpX = this.x;
        let tmpY = this.y;
        img.onload = function () {
            ctx.drawImage(img, tmpX, tmpY);
        }
        if (first) {
            aliveEnemies.push(this);
        }

    }
    moveX(dir) {
        if (!this.exists) {
            return;
        }
        if (dir == "right") {
            this.x += 2;
        } else {
            this.x -= 2;
        }
    }
    moveY(dir) {
        if (!this.exists) {
            return;
        }
        if (dir == "top") {
            this.y -= 2;
        } else {
            this.y += 2;
        }
    }
    getX() {
        return Number(this.x);
    }
    getY() {
        return Number(this.y);
    }
    getReward() {
        return Number(this.reward);
    }
    damaged() {
        this.health--;
        if (this.health <= 0) {
            this.kill()
        }
    }
    kill() {
        let a = document.getElementById("cash").innerHTML;
        document.getElementById("cash").innerHTML = Number(a) + this.reward;
        self = null;
        this.exists = false;
        aliveEnemies.splice(this, 1);
    }
    offMap() {
        self = null;
        this.exists = false;
        aliveEnemies.splice(this, 1);
    }
    doesExist() {
        return this.exists;
    }



    doThing(enemyMap) {
        if (this.doesExist) {
            let eM = enemyMap.find(enemy => enemy.name == this.type);
            this.spawn(true);
            //This was an attempt at neatening the below code but I couldn't figure it out so oops -Mason
            /*this.moveSelf = setInterval((function () {
                    if (this.y >= 500) {
                        this.offMap();
                        loseHealth();
                        clearInterval(this.moveSelf);
                    }
                    if (this.y <= 391 && this.x == 145) {
                        this.moveY("down");
                        this.spawn();
                    }
                    if (this.y >= 391 && this.x <= 789) {
                        this.moveX("right");
                        this.spawn();
                    }
                    if (this.y >= 68 && this.x >= 789) {
                        this.moveY("top");
                        this.spawn();
                    }
                    if (this.y <= 68 && this.x >= 268) {
                        this.moveX("left");
                        this.spawn();
                    }
                    if (this.y <= 500 && this.x <= 268) {
                        this.moveX("down");
                        this.spawn();
                    }
                }).bind(this), 100);
            }*/

            //This mess of code times the movements so the enemies stay on the track, the speed at which the function occurs is based on enemy tier speed. There is also an offset of the timer to let it work correctly.
            for (var i = 0; i < aliveEnemies.length; i++) {
                if (this == aliveEnemies[i]) {
                    this.offset = i * 16;
                    break;
                }
            }
            this.t = 0;
            this.a = setInterval((function () {
                this.moveY("down");
                this.spawn();
                if (++this.t == 170 + this.offset) {
                    clearInterval(this.a);
                    this.t = 0;

                    this.b = setInterval((function () {

                        this.moveX("right");
                        this.spawn();
                        if (++this.t == 294) {
                            clearInterval(this.b);
                            this.t = 0;

                            this.c = setInterval((function () {

                                this.moveY("top");
                                this.spawn();
                                if (++this.t == 125) {
                                    clearInterval(this.c);
                                    this.t = 0;

                                    this.c = setInterval((function () {

                                        this.moveY("top");
                                        this.spawn();
                                        if (++this.t == 6) {
                                            clearInterval(this.c);
                                            this.t = 0;

                                            this.d = setInterval((function () {

                                                this.moveX("top");
                                                this.spawn();
                                                if (++this.t == 225) {
                                                    clearInterval(this.d);
                                                    this.t = 0;

                                                    this.f = setInterval((function () {

                                                        this.moveY("d");
                                                        this.spawn();
                                                        if (this.getY() >= 500) {
                                                            clearInterval(this.f);
                                                            this.offMap();
                                                            loseHealth();
                                                        }
                                                    }).bind(this), eM.speed);
                                                }
                                            }).bind(this), eM.speed);
                                        }
                                    }).bind(this), eM.speed);
                                }
                            }).bind(this), eM.speed);
                        }
                    }).bind(this), eM.speed);
                }
            }).bind(this), eM.speed);
        }
        else {
            this.kill();
        }
    }
}

//Enemy creation functions for Wave creation.
function makeT1Enemy(x, y)
{
    var t1Enemy = new Enemy("enemy1", x, y, 10);
  return t1Enemy;
}
function makeT2Enemy(x, y)
{
	var t2Enemy = new Enemy("enemy2", x, y, 20);
  return t2Enemy;
}
function makeT3Enemy(x, y)
{
	var t3Enemy = new Enemy("enemy3", x, y, 30);
  return t3Enemy;
}
function makeT4Enemy(x, y)
{
	var t4Enemy = new Enemy("enemy4", x, y, 40);
  return t4Enemy;
}
function makeT5Enemy(x, y)
{
	var t5Enemy = new Enemy("enemy5", x, y, 50);
  return t5Enemy;
}
function makeT6Enemy(x, y)
{
	var t6Enemy = new Enemy("enemy1", x, y, 60);
  return t6Enemy;
}

///Make-A-Wave Foundation
function createWave(waveNumber) {
    var enemyVals = [1, 2, 3, 4, 5, 6]; //"Cost" of creating each enemy, from 1-6 (0-5).
    var waveValue = Math.round(waveNumber * 6); //Sets the "budget" for each wave
    var enemNum = 0; //Stores the total number of enemies (for spacing).
    var enemyNums = [0, 0, 0, 0, 0, 0] //Splits total number of enemies into tiers for number balancing and testing.
    //This loopy boi runs through if statements for every tier of enemy, starting at 6 and going down to 1. It then checks if the wave number is high enough to spawn it, if there is enough budget left to spawn it, and if there are already too many of that tier of enemy. Tier 1 has no limit, the other limits are dictated by wave number. Once the budget is 0, no new enemies spawn and the loop ends.
    while (true) {
        if (waveNumber > 49 && waveValue > enemyVals[5] && enemyNums[5] < 1 + waveNumber - 50) {
            var t6Enemy = makeT6Enemy(145, 0 - enemNum * 32);
            t6Enemy.doThing(enemyMap);
            waveValue -= enemyVals[5];
            enemNum++;
            enemyNums[5] = enemyNums[5] + 1;
            continue;
        }
        if (waveNumber > 39 && waveValue > enemyVals[4] && enemyNums[4] < 1 + waveNumber - 40) {
            var t5Enemy = makeT5Enemy(145, 0 - enemNum * 32);
            t5Enemy.doThing(enemyMap);
            waveValue -= enemyVals[4];
            enemNum++;
            enemyNums[4] = enemyNums[4] + 1;
            continue;
        }
        if (waveNumber > 29 && waveValue > enemyVals[3] && enemyNums[3] < 1 + waveNumber - 30) {
            var t4Enemy = makeT4Enemy(145, 0 - enemNum * 32);
            t4Enemy.doThing(enemyMap);
            waveValue -= enemyVals[3];
            enemNum++;
            enemyNums[3] = enemyNums[3] + 1;
            continue;
        }
        if (waveNumber > 19 && waveValue > enemyVals[2] && enemyNums[2] < 1 + waveNumber - 20) {
            var t3Enemy = makeT3Enemy(145, 0 - enemNum * 32);
            t3Enemy.doThing(enemyMap);
            waveValue -= enemyVals[2];
            enemNum++;
            enemyNums[2] = enemyNums[2] + 1;
            continue;
        }
        if (waveNumber > 9 && waveValue > enemyVals[1] && enemyNums[1] < 1 + waveNumber - 10) {
            var t2Enemy = makeT2Enemy(145, 0 - enemNum * 32);
            t2Enemy.doThing(enemyMap);
            waveValue -= enemyVals[1];
            enemNum++;
            enemyNums[1] = enemyNums[1] + 1;
            continue;
        }
        if (waveValue >= enemyVals[0]) {
            var t1Enemy = makeT1Enemy(145, 0 - enemNum * 32);
            t1Enemy.doThing(enemyMap);
            waveValue -= enemyVals[0];
            enemNum++;
            enemyNums[0] = enemyNums[0] + 1;
            continue;
        }
        break;
    }
}
